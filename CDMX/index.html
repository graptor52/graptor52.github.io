<!DOCTYPE html>
<html>
<head>
  <title>CDMX Itinerary</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      height: 100vh;
    }
    #map {
      flex: 1;
    }
    #sidebar {
      width: 300px;
      overflow-y: auto;
      padding: 1rem;
      background: #f4f4f4;
      border-right: 1px solid #ccc;
    }
    h2 {
      margin-top: 0;
    }
    .day-button {
      background: #fff;
      border: 1px solid #ccc;
      margin: 0.5rem 0;
      padding: 0.5rem;
      cursor: pointer;
      text-align: left;
      position: relative;
    }
    .day-button:hover {
      background: #e0e0e0;
    }
    .day-color {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
    }
    .day-details {
      display: none;
      padding-left: 1rem;
      font-size: 0.9em;
      color: #333;
    }
    .day-details div {
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
  <div id="sidebar">
    <h2>CDMX Itinerary</h2>
    <div id="days"></div>
  </div>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([19.4326, -99.1332], 12);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
    }).addTo(map);

    const itinerary = {
      "Day 1": [
        {
          name: "Lardo",
          coords: [19.4126, -99.1727],
          icon: "ðŸ½ï¸",
          desc: "Dinner spot for night 1, casual and cozy.",
          link: "https://goo.gl/maps/7Ff5E7X1zjvHHVwz7"
        },
        {
          name: "PanaderÃ­a Rosetta",
          coords: [19.4178, -99.1667],
          icon: "ðŸ¥",
          desc: "Pastries + good intro to Roma vibe.",
          link: "https://goo.gl/maps/jAqkKMx6WCU3sB5e7"
        }
      ],
      "Day 2": [
        {
          name: "ZÃ³calo",
          coords: [19.4326, -99.1332],
          icon: "ðŸ›ï¸",
          desc: "Historic center of Mexico City.",
          link: "https://goo.gl/maps/mQwhMJzN9gs"
        },
        {
          name: "Palacio de Bellas Artes",
          coords: [19.4352, -99.1412],
          icon: "ðŸŽ­",
          desc: "Cultural gem with amazing architecture.",
          link: "https://goo.gl/maps/5DyUoLuorYo"
        }
      ],
      "Day 3": [
        {
          name: "Bosque de Chapultepec",
          coords: [19.4204, -99.1819],
          icon: "ðŸŒ³",
          desc: "Massive urban park with museums and greenery.",
          link: "https://goo.gl/maps/ox4ExGeZaEGtxqkf6"
        },
        {
          name: "Museo Nacional de AntropologÃ­a",
          coords: [19.4260, -99.1860],
          icon: "ðŸº",
          desc: "Mexicoâ€™s premier anthropology museum.",
          link: "https://goo.gl/maps/jhUpz3VQxgv"
        },
        {
          name: "Castillo de Chapultepec",
          coords: [19.4206, -99.1810],
          icon: "ðŸ°",
          desc: "Hilltop castle with views and history.",
          link: "https://goo.gl/maps/6tpDcVdS3R42"
        }
      ],
      "Day 4": [
        {
          name: "TeotihuacÃ¡n Pyramids",
          coords: [19.6925, -98.8430],
          icon: "ðŸ—¿",
          desc: "Ancient Mesoamerican city, pyramids of Sun & Moon.",
          link: "https://goo.gl/maps/9p2AGDPGqUo"
        }
      ],
      "Day 5": [
        {
          name: "Frida Kahlo Museum",
          coords: [19.3553, -99.1621],
          icon: "ðŸŽ¨",
          desc: "Casa Azul â€“ Fridaâ€™s iconic home.",
          link: "https://goo.gl/maps/5RmoUwhD6t22"
        },
        {
          name: "Museo Anahuacalli",
          coords: [19.3255, -99.1519],
          icon: "ðŸ›ï¸",
          desc: "Museum built by Diego Rivera from volcanic stone.",
          link: "https://goo.gl/maps/ENdJHh2dUbQ2"
        },
        {
          name: "CablebÃºs Line 2",
          coords: [19.5166, -99.0451],
          icon: "ðŸš ",
          desc: "Scenic cable car through north CDMX.",
          link: "https://goo.gl/maps/jMuS3vjHE9HNSZtP7"
        }
      ],
      "Day 6": [
        {
          name: "UNAM Central Library",
          coords: [19.3322, -99.1888],
          icon: "ðŸ“š",
          desc: "Iconic mural-covered library at UNAM.",
          link: "https://goo.gl/maps/9B6xYZKfe1p"
        },
        {
          name: "Espacio EscultÃ³rico",
          coords: [19.3039, -99.1794],
          icon: "ðŸ§±",
          desc: "Massive land art piece made of stone.",
          link: "https://goo.gl/maps/cWzFjstDnPN2"
        },
        {
          name: "MUAC",
          coords: [19.3114, -99.1844],
          icon: "ðŸ–¼ï¸",
          desc: "Modern art museum at UNAM.",
          link: "https://goo.gl/maps/YkHS1MC6bxs"
        }
      ],
      "Day 7": [
        {
          name: "Museo Soumaya",
          coords: [19.4401, -99.2041],
          icon: "ðŸ–¼ï¸",
          desc: "Futuristic museum with European art collection.",
          link: "https://goo.gl/maps/cFfxLRhr9MK2"
        },
        {
          name: "Museo Jumex",
          coords: [19.4408, -99.2035],
          icon: "ðŸ§ƒ",
          desc: "Contemporary art in a bold building.",
          link: "https://goo.gl/maps/BsHKjcBUkTQ2"
        },
        {
          name: "Interlomas",
          coords: [19.3962, -99.2695],
          icon: "ðŸ™ï¸",
          desc: "Modern suburban development with unique malls.",
          link: "https://goo.gl/maps/krV9dvkuUZK2"
        }
      ]
    };

    const dayColors = ["#e6194b", "#3cb44b", "#ffe119", "#4363d8", "#f58231", "#911eb4", "#46f0f0"];

    let dayIndex = 0;
    const dayGroups = [];

    for (const [day, places] of Object.entries(itinerary)) {
      const color = dayColors[dayIndex % dayColors.length];
      const group = L.featureGroup();
      dayGroups.push(group);

      places.forEach(place => {
        const marker = L.circleMarker(place.coords, {
          radius: 8,
          color: color,
          fillColor: color,
          fillOpacity: 0.9
        }).addTo(group);

        marker.bindPopup(`
          <strong>${place.icon} ${place.name}</strong><br>
          ${place.desc}<br>
          <a href="${place.link}" target="_blank">Open in Maps</a>
        `);
      });

      group.addTo(map);

      const btn = document.createElement("div");
      btn.className = "day-button";

      const colorIcon = document.createElement("span");
      colorIcon.className = "day-color";
      colorIcon.style.backgroundColor = color;

      const text = document.createTextNode(day);

      btn.appendChild(colorIcon);
      btn.appendChild(text);

      const detail = document.createElement("div");
      detail.className = "day-details";
      places.forEach(p => {
        const el = document.createElement("div");
        el.innerHTML = `<strong>${p.icon} ${p.name}</strong><br>${p.desc}<br><a href="${p.link}" target="_blank">Open in Maps</a>`;
        detail.appendChild(el);
      });

      btn.appendChild(detail);
      btn.onclick = () => {
        setTimeout(() => map.fitBounds(group.getBounds(), { padding: [50, 50] }), 100);
        detail.style.display = detail.style.display === "block" ? "none" : "block";
      };

      document.getElementById("days").appendChild(btn);

      dayIndex++;
    }
  </script>
</body>
</html>
